---
import Layout from '@/layouts/Layout.astro';
import { ProfileHeader } from '@/components/profile/profile-header';
import { StatsOverview } from '@/components/profile/stats-overview';
import { TestHistory } from '@/components/profile/test-history';

// Mock data - در پروژه واقعی از API یا دیتابیس دریافت می‌شود
const userData = {
  name: 'علی محمدی',
  email: 'ali@example.com',
  username: 'alim',
  avatarUrl: 'https://api.dicebear.com/7.x/avataaars/svg?seed=ali'
};

const statsData = {
  totalTests: 15,
  averageScore: 85,
  passRate: 90,
  totalTime: 480 // minutes
};

const testResults = [
  {
    id: '1',
    testName: 'مبانی جاوااسکریپت',
    date: new Date('2024-02-15'),
    score: 85,
    passed: true,
    category: 'برنامه‌نویسی'
  },
  {
    id: '2',
    testName: 'ری‌اکت پیشرفته',
    date: new Date('2024-02-10'),
    score: 92,
    passed: true,
    category: 'برنامه‌نویسی'
  },
  {
    id: '3',
    testName: 'تایپ‌اسکریپت',
    date: new Date('2024-02-05'),
    score: 78,
    passed: true,
    category: 'برنامه‌نویسی'
  }
];
---

<Layout title="پروفایل کاربری">
  <div class="container py-8">
    <div class="max-w-4xl mx-auto space-y-8">
      <ProfileHeader
        client:load
        name={userData.name}
        email={userData.email}
        username={userData.username}
        avatarUrl={userData.avatarUrl}
        onEdit={() => {}}
      />

      <StatsOverview
        client:load
        totalTests={statsData.totalTests}
        averageScore={statsData.averageScore}
        passRate={statsData.passRate}
        totalTime={statsData.totalTime}
      />

      <TestHistory
        client:load
        results={testResults}
      />
    </div>
  </div>
</Layout>
---